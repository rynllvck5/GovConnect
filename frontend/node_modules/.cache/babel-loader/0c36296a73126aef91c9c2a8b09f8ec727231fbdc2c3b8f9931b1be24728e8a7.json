{"ast":null,"code":"var _jsxFileName = \"C:\\\\Web Systems\\\\GovConnect\\\\frontend\\\\src\\\\pages\\\\Profile.jsx\",\n  _s = $RefreshSig$();\nimport React, { useMemo, useState } from 'react';\nimport { ensureUser } from '../utils/user';\nimport { getEngagedThreads } from '../utils/engagements';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst STORAGE_KEY = 'forum:posts';\nfunction loadPosts() {\n  try {\n    const s = localStorage.getItem(STORAGE_KEY);\n    return s ? JSON.parse(s) : [];\n  } catch {\n    return [];\n  }\n}\nexport default function Profile() {\n  _s();\n  const user = ensureUser();\n  const [tab, setTab] = useState('mine'); // 'mine' | 'engaged'\n  const posts = loadPosts();\n  const mine = useMemo(() => posts.filter(p => p.author === user.name), [posts, user.name]);\n  const engagedPosts = useMemo(() => {\n    const threads = getEngagedThreads(user.name) || [];\n    const postIds = threads.filter(t => typeof t === 'string' && t.startsWith('comments:forum:post:')).map(t => t.replace('comments:forum:post:', ''));\n    const set = new Set(postIds);\n    return posts.filter(p => set.has(p.id) && p.author !== user.name);\n  }, [posts, user.name]);\n  const list = tab === 'mine' ? mine : engagedPosts;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-semibold\",\n        children: [user.name, \"'s Profile\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2 text-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `px-3 py-1 rounded ${tab === 'mine' ? 'bg-blue-600 text-white' : 'border'}`,\n          onClick: () => setTab('mine'),\n          children: \"My Posts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `px-3 py-1 rounded ${tab === 'engaged' ? 'bg-blue-600 text-white' : 'border'}`,\n          onClick: () => setTab('engaged'),\n          children: \"Engaged\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 space-y-3\",\n      children: [list.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-gray-600\",\n        children: \"No posts to show.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 11\n      }, this), list.map(p => /*#__PURE__*/_jsxDEV(\"article\", {\n        className: \"border rounded-md p-4 bg-white\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-gray-500\",\n          children: [new Date(p.ts).toLocaleString(), \" \\u2022 \", p.category, p.location ? ` • ${p.location}` : '']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"font-semibold\",\n          children: p.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-600\",\n          children: [\"By \", p.author]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-800 mt-2\",\n          children: p.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }, this)]\n      }, p.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this);\n}\n_s(Profile, \"DDFtRj/TrUIYjgZC6saehv5BB7Q=\");\n_c = Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useMemo","useState","ensureUser","getEngagedThreads","jsxDEV","_jsxDEV","STORAGE_KEY","loadPosts","s","localStorage","getItem","JSON","parse","Profile","_s","user","tab","setTab","posts","mine","filter","p","author","name","engagedPosts","threads","postIds","t","startsWith","map","replace","set","Set","has","id","list","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","length","Date","ts","toLocaleString","category","location","title","message","_c","$RefreshReg$"],"sources":["C:/Web Systems/GovConnect/frontend/src/pages/Profile.jsx"],"sourcesContent":["import React, { useMemo, useState } from 'react';\nimport { ensureUser } from '../utils/user';\nimport { getEngagedThreads } from '../utils/engagements';\n\nconst STORAGE_KEY = 'forum:posts';\n\nfunction loadPosts() {\n  try { const s = localStorage.getItem(STORAGE_KEY); return s ? JSON.parse(s) : []; } catch { return []; }\n}\n\nexport default function Profile() {\n  const user = ensureUser();\n  const [tab, setTab] = useState('mine'); // 'mine' | 'engaged'\n  const posts = loadPosts();\n\n  const mine = useMemo(() => posts.filter(p => p.author === user.name), [posts, user.name]);\n\n  const engagedPosts = useMemo(() => {\n    const threads = getEngagedThreads(user.name) || [];\n    const postIds = threads\n      .filter(t => typeof t === 'string' && t.startsWith('comments:forum:post:'))\n      .map(t => t.replace('comments:forum:post:', ''));\n    const set = new Set(postIds);\n    return posts.filter(p => set.has(p.id) && p.author !== user.name);\n  }, [posts, user.name]);\n\n  const list = tab === 'mine' ? mine : engagedPosts;\n\n  return (\n    <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-2xl font-semibold\">{user.name}'s Profile</h1>\n        <div className=\"flex items-center gap-2 text-sm\">\n          <button className={`px-3 py-1 rounded ${tab==='mine'?'bg-blue-600 text-white':'border'}`} onClick={()=>setTab('mine')}>My Posts</button>\n          <button className={`px-3 py-1 rounded ${tab==='engaged'?'bg-blue-600 text-white':'border'}`} onClick={()=>setTab('engaged')}>Engaged</button>\n        </div>\n      </div>\n\n      <div className=\"mt-4 space-y-3\">\n        {list.length === 0 && (\n          <div className=\"text-sm text-gray-600\">No posts to show.</div>\n        )}\n        {list.map(p => (\n          <article key={p.id} className=\"border rounded-md p-4 bg-white\">\n            <div className=\"text-xs text-gray-500\">{new Date(p.ts).toLocaleString()} • {p.category}{p.location?` • ${p.location}`:''}</div>\n            <h2 className=\"font-semibold\">{p.title}</h2>\n            <div className=\"text-sm text-gray-600\">By {p.author}</div>\n            <p className=\"text-sm text-gray-800 mt-2\">{p.message}</p>\n          </article>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AAChD,SAASC,UAAU,QAAQ,eAAe;AAC1C,SAASC,iBAAiB,QAAQ,sBAAsB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEzD,MAAMC,WAAW,GAAG,aAAa;AAEjC,SAASC,SAASA,CAAA,EAAG;EACnB,IAAI;IAAE,MAAMC,CAAC,GAAGC,YAAY,CAACC,OAAO,CAACJ,WAAW,CAAC;IAAE,OAAOE,CAAC,GAAGG,IAAI,CAACC,KAAK,CAACJ,CAAC,CAAC,GAAG,EAAE;EAAE,CAAC,CAAC,MAAM;IAAE,OAAO,EAAE;EAAE;AACzG;AAEA,eAAe,SAASK,OAAOA,CAAA,EAAG;EAAAC,EAAA;EAChC,MAAMC,IAAI,GAAGb,UAAU,CAAC,CAAC;EACzB,MAAM,CAACc,GAAG,EAAEC,MAAM,CAAC,GAAGhB,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;EACxC,MAAMiB,KAAK,GAAGX,SAAS,CAAC,CAAC;EAEzB,MAAMY,IAAI,GAAGnB,OAAO,CAAC,MAAMkB,KAAK,CAACE,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,MAAM,KAAKP,IAAI,CAACQ,IAAI,CAAC,EAAE,CAACL,KAAK,EAAEH,IAAI,CAACQ,IAAI,CAAC,CAAC;EAEzF,MAAMC,YAAY,GAAGxB,OAAO,CAAC,MAAM;IACjC,MAAMyB,OAAO,GAAGtB,iBAAiB,CAACY,IAAI,CAACQ,IAAI,CAAC,IAAI,EAAE;IAClD,MAAMG,OAAO,GAAGD,OAAO,CACpBL,MAAM,CAACO,CAAC,IAAI,OAAOA,CAAC,KAAK,QAAQ,IAAIA,CAAC,CAACC,UAAU,CAAC,sBAAsB,CAAC,CAAC,CAC1EC,GAAG,CAACF,CAAC,IAAIA,CAAC,CAACG,OAAO,CAAC,sBAAsB,EAAE,EAAE,CAAC,CAAC;IAClD,MAAMC,GAAG,GAAG,IAAIC,GAAG,CAACN,OAAO,CAAC;IAC5B,OAAOR,KAAK,CAACE,MAAM,CAACC,CAAC,IAAIU,GAAG,CAACE,GAAG,CAACZ,CAAC,CAACa,EAAE,CAAC,IAAIb,CAAC,CAACC,MAAM,KAAKP,IAAI,CAACQ,IAAI,CAAC;EACnE,CAAC,EAAE,CAACL,KAAK,EAAEH,IAAI,CAACQ,IAAI,CAAC,CAAC;EAEtB,MAAMY,IAAI,GAAGnB,GAAG,KAAK,MAAM,GAAGG,IAAI,GAAGK,YAAY;EAEjD,oBACEnB,OAAA;IAAK+B,SAAS,EAAC,6CAA6C;IAAAC,QAAA,gBAC1DhC,OAAA;MAAK+B,SAAS,EAAC,mCAAmC;MAAAC,QAAA,gBAChDhC,OAAA;QAAI+B,SAAS,EAAC,wBAAwB;QAAAC,QAAA,GAAEtB,IAAI,CAACQ,IAAI,EAAC,YAAU;MAAA;QAAAe,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACjEpC,OAAA;QAAK+B,SAAS,EAAC,iCAAiC;QAAAC,QAAA,gBAC9ChC,OAAA;UAAQ+B,SAAS,EAAE,qBAAqBpB,GAAG,KAAG,MAAM,GAAC,wBAAwB,GAAC,QAAQ,EAAG;UAAC0B,OAAO,EAAEA,CAAA,KAAIzB,MAAM,CAAC,MAAM,CAAE;UAAAoB,QAAA,EAAC;QAAQ;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACxIpC,OAAA;UAAQ+B,SAAS,EAAE,qBAAqBpB,GAAG,KAAG,SAAS,GAAC,wBAAwB,GAAC,QAAQ,EAAG;UAAC0B,OAAO,EAAEA,CAAA,KAAIzB,MAAM,CAAC,SAAS,CAAE;UAAAoB,QAAA,EAAC;QAAO;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1I,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAENpC,OAAA;MAAK+B,SAAS,EAAC,gBAAgB;MAAAC,QAAA,GAC5BF,IAAI,CAACQ,MAAM,KAAK,CAAC,iBAChBtC,OAAA;QAAK+B,SAAS,EAAC,uBAAuB;QAAAC,QAAA,EAAC;MAAiB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAC9D,EACAN,IAAI,CAACN,GAAG,CAACR,CAAC,iBACThB,OAAA;QAAoB+B,SAAS,EAAC,gCAAgC;QAAAC,QAAA,gBAC5DhC,OAAA;UAAK+B,SAAS,EAAC,uBAAuB;UAAAC,QAAA,GAAE,IAAIO,IAAI,CAACvB,CAAC,CAACwB,EAAE,CAAC,CAACC,cAAc,CAAC,CAAC,EAAC,UAAG,EAACzB,CAAC,CAAC0B,QAAQ,EAAE1B,CAAC,CAAC2B,QAAQ,GAAC,MAAM3B,CAAC,CAAC2B,QAAQ,EAAE,GAAC,EAAE;QAAA;UAAAV,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAC/HpC,OAAA;UAAI+B,SAAS,EAAC,eAAe;UAAAC,QAAA,EAAEhB,CAAC,CAAC4B;QAAK;UAAAX,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eAC5CpC,OAAA;UAAK+B,SAAS,EAAC,uBAAuB;UAAAC,QAAA,GAAC,KAAG,EAAChB,CAAC,CAACC,MAAM;QAAA;UAAAgB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAC1DpC,OAAA;UAAG+B,SAAS,EAAC,4BAA4B;UAAAC,QAAA,EAAEhB,CAAC,CAAC6B;QAAO;UAAAZ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC;MAAA,GAJ7CpB,CAAC,CAACa,EAAE;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAKT,CACV,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAAC3B,EAAA,CA3CuBD,OAAO;AAAAsC,EAAA,GAAPtC,OAAO;AAAA,IAAAsC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}