{"ast":null,"code":"var _jsxFileName = \"C:\\\\Web Systems\\\\GovConnect\\\\frontend\\\\src\\\\components\\\\tourism\\\\CategoryForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useAuth } from '../../context/AuthContext';\nimport { API_BASE } from '../../config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CategoryForm({\n  category,\n  onClose,\n  onSaved\n}) {\n  _s();\n  const isEdit = !!category;\n  const {\n    token\n  } = useAuth();\n  const [title, setTitle] = useState((category === null || category === void 0 ? void 0 : category.title) || '');\n  const [description, setDescription] = useState((category === null || category === void 0 ? void 0 : category.description) || '');\n  const [submitting, setSubmitting] = useState(false);\n  const [status, setStatus] = useState({\n    kind: null,\n    text: ''\n  });\n  async function handleSubmit(e) {\n    e.preventDefault();\n    setSubmitting(true);\n    try {\n      const payload = {\n        title: title.trim(),\n        description: description || null\n        // slug will be auto-generated by backend; schema defaults are also applied\n      };\n      const url = isEdit ? `${API_BASE}/tourism/categories/${category.id}` : `${API_BASE}/tourism/categories`;\n      const method = isEdit ? 'PUT' : 'POST';\n      const r = await fetch(url, {\n        method,\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!r.ok) {\n        const e = await r.json().catch(() => ({}));\n        throw new Error(e.error || 'Failed to save category');\n      }\n      setStatus({\n        kind: 'success',\n        text: 'Saved successfully.'\n      });\n      setTimeout(() => {\n        setStatus({\n          kind: null,\n          text: ''\n        });\n        onSaved === null || onSaved === void 0 ? void 0 : onSaved();\n        onClose === null || onClose === void 0 ? void 0 : onClose();\n      }, 2000);\n    } catch (err) {\n      setStatus({\n        kind: 'error',\n        text: err.message || 'An error occurred.'\n      });\n      setTimeout(() => setStatus({\n        kind: null,\n        text: ''\n      }), 2000);\n    } finally {\n      setSubmitting(false);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"space-y-4 p-1 sm:p-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block text-sm text-gray-700\",\n        children: \"Title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: title,\n        onChange: e => setTitle(e.target.value),\n        className: \"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block text-sm text-gray-700\",\n        children: \"Description\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: description,\n        onChange: e => setDescription(e.target.value),\n        rows: 2,\n        className: \"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), status.kind ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `px-4 py-2 rounded-md text-sm ${status.kind === 'success' ? 'bg-green-50 text-green-700' : 'bg-red-50 text-red-700'}`,\n      children: status.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-end gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: onClose,\n        className: \"px-4 py-2 rounded-md border\",\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: submitting,\n        className: \"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700\",\n        children: submitting ? 'Saving...' : isEdit ? 'Save' : 'Create'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n_s(CategoryForm, \"NArF82dPbbrGY8SwGQ3XA/2lTRM=\", false, function () {\n  return [useAuth];\n});\n_c = CategoryForm;\nvar _c;\n$RefreshReg$(_c, \"CategoryForm\");","map":{"version":3,"names":["React","useState","useAuth","API_BASE","jsxDEV","_jsxDEV","CategoryForm","category","onClose","onSaved","_s","isEdit","token","title","setTitle","description","setDescription","submitting","setSubmitting","status","setStatus","kind","text","handleSubmit","e","preventDefault","payload","trim","url","id","method","r","fetch","headers","Authorization","body","JSON","stringify","ok","json","catch","Error","error","setTimeout","err","message","onSubmit","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","target","required","rows","type","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Web Systems/GovConnect/frontend/src/components/tourism/CategoryForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { API_BASE } from '../../config';\r\n\r\nexport default function CategoryForm({ category, onClose, onSaved }) {\r\n  const isEdit = !!category;\r\n  const { token } = useAuth();\r\n  const [title, setTitle] = useState(category?.title || '');\r\n  const [description, setDescription] = useState(category?.description || '');\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [status, setStatus] = useState({ kind: null, text: '' });\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n    setSubmitting(true);\r\n    try {\r\n      const payload = {\r\n        title: title.trim(),\r\n        description: description || null,\r\n        // slug will be auto-generated by backend; schema defaults are also applied\r\n      };\r\n      const url = isEdit ? `${API_BASE}/tourism/categories/${category.id}` : `${API_BASE}/tourism/categories`;\r\n      const method = isEdit ? 'PUT' : 'POST';\r\n      const r = await fetch(url, {\r\n        method,\r\n        headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${token}` },\r\n        body: JSON.stringify(payload),\r\n      });\r\n      if (!r.ok) {\r\n        const e = await r.json().catch(()=>({}));\r\n        throw new Error(e.error || 'Failed to save category');\r\n      }\r\n      setStatus({ kind: 'success', text: 'Saved successfully.' });\r\n      setTimeout(() => { setStatus({ kind: null, text: '' }); onSaved?.(); onClose?.(); }, 2000);\r\n    } catch (err) {\r\n      setStatus({ kind: 'error', text: err.message || 'An error occurred.' });\r\n      setTimeout(() => setStatus({ kind: null, text: '' }), 2000);\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-4 p-1 sm:p-2\">\r\n      <div>\r\n        <label className=\"block text-sm text-gray-700\">Title</label>\r\n        <input value={title} onChange={(e)=>setTitle(e.target.value)} className=\"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\" required />\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm text-gray-700\">Description</label>\r\n        <textarea value={description} onChange={(e)=>setDescription(e.target.value)} rows={2} className=\"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\r\n      </div>\r\n      {status.kind ? (\r\n        <div className={`px-4 py-2 rounded-md text-sm ${status.kind==='success' ? 'bg-green-50 text-green-700' : 'bg-red-50 text-red-700'}`}>{status.text}</div>\r\n      ) : (\r\n        <div className=\"flex justify-end gap-2\">\r\n          <button type=\"button\" onClick={onClose} className=\"px-4 py-2 rounded-md border\">Cancel</button>\r\n          <button disabled={submitting} className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700\">{submitting ? 'Saving...' : (isEdit ? 'Save' : 'Create')}</button>\r\n        </div>\r\n      )}\r\n    </form>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}