{"ast":null,"code":"var _jsxFileName = \"C:\\\\Web Systems\\\\GovConnect\\\\frontend\\\\src\\\\pages\\\\Forms.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { API_BASE, API_ORIGIN } from '../config';\nimport Modal from '../components/Modal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Forms() {\n  _s();\n  const {\n    user,\n    token\n  } = useAuth();\n  const isAdmin = !!user && (user.role === 'admin' || user.role === 'superadmin');\n  const myOfficeId = (user === null || user === void 0 ? void 0 : user.officeId) || (user === null || user === void 0 ? void 0 : user.office_id) || null;\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [showAdd, setShowAdd] = useState(false);\n  const [editItem, setEditItem] = useState(null);\n  const [deleteItem, setDeleteItem] = useState(null);\n  const [offices, setOffices] = useState([]);\n  const canManage = useMemo(() => f => {\n    if (isAdmin) return true;\n    if (!!user && user.role === 'officer' && myOfficeId && Number(f.office_id) === Number(myOfficeId)) return true;\n    return false;\n  }, [isAdmin, user, myOfficeId]);\n  async function loadForms() {\n    setLoading(true);\n    setError('');\n    try {\n      const r = await fetch(`${API_BASE}/forms`);\n      if (!r.ok) throw new Error('Failed loading forms');\n      const list = await r.json();\n      setItems(Array.isArray(list) ? list : []);\n    } catch (e) {\n      setError(e.message || 'Error');\n    } finally {\n      setLoading(false);\n    }\n  }\n  async function loadOffices() {\n    if (!isAdmin) return; // only admins need office list\n    try {\n      const r = await fetch(`${API_BASE}/offices`);\n      if (!r.ok) return;\n      const list = await r.json();\n      setOffices(Array.isArray(list) ? list : []);\n    } catch {}\n  }\n  useEffect(() => {\n    loadForms();\n  }, []);\n  useEffect(() => {\n    loadOffices();\n  }, [isAdmin]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-semibold mb-4\",\n        children: \"Downloadable Forms\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), (isAdmin || !!user && user.role === 'officer' && myOfficeId) && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowAdd(true),\n        className: \"text-sm px-3 py-2 rounded-md border bg-white\",\n        children: \"Add Form\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-sm text-gray-600\",\n      children: \"Loading forms...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-sm text-red-600\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border rounded-md divide-y\",\n      children: [(items || []).map(f => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative p-4\",\n        children: [canManage(f) && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute top-2 right-2 flex items-center gap-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setEditItem(f),\n            title: \"Edit\",\n            className: \"inline-flex items-center justify-center w-8 h-8 rounded-md text-gray-600 hover:text-gray-800 hover:bg-gray-100\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              viewBox: \"0 0 20 20\",\n              fill: \"currentColor\",\n              className: \"w-4 h-4\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M15.728 1.794a2.5 2.5 0 0 1 3.536 3.536l-10 10A2.5 2.5 0 0 1 7.5 16H5a1 1 0 0 1-1-1v-2.5a2.5 2.5 0 0 1 .732-1.768l10-10ZM5 18a1 1 0 1 0 0-2h2.5a4.5 4.5 0 0 0 3.182-1.318l10-10a4.5 4.5 0 1 0-6.364-6.364l-10 10A4.5 4.5 0 0 0 3 12.5V15a3 3 0 0 0 3 3H5Z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 119\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setDeleteItem(f),\n            title: \"Delete\",\n            className: \"inline-flex items-center justify-center w-8 h-8 rounded-md text-red-600 hover:text-red-700 hover:bg-red-50\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              viewBox: \"0 0 20 20\",\n              fill: \"currentColor\",\n              className: \"w-4 h-4\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                fillRule: \"evenodd\",\n                d: \"M9 2a1 1 0 0 0-.894.553L7.382 4H4a1 1 0 1 0 0 2h.293l.853 10.235A2 2 0 0 0 7.14 18h5.72a2 2 0 0 0 1.994-1.765L15.707 6H16a1 1 0 1 0 0-2h-3.382l-.724-1.447A1 1 0 0 0 10 2H9Zm1 5a1 1 0 0 1 1 1v7a1 1 0 1 1-2 0V8a1 1 0 0 1 1-1Zm-3 1a1 1 0 0 1 2 0v7a1 1 0 1 1-2 0V8Zm7 0a1 1 0 0 1 2 0v7a1 1 0 1 1-2 0V8Z\",\n                clipRule: \"evenodd\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 119\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"min-w-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-medium truncate\",\n              children: f.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-600 truncate\",\n              children: f.description || '—'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-500\",\n              children: [\"Office: \", f.office_name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 17\n            }, this), !!(f.files && f.files.length > 1) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-500 mt-1\",\n              children: [\"Files: \", f.files.length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"shrink-0 flex items-center gap-2\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: e => handleDownload(e, f),\n              className: \"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\",\n              children: \"Download\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this)]\n      }, f.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this)), !loading && (!items || items.length === 0) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 text-sm text-gray-600\",\n        children: \"No forms yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: !!showAdd,\n      onClose: () => setShowAdd(false),\n      title: \"Add Form\",\n      children: showAdd && /*#__PURE__*/_jsxDEV(FormEditor, {\n        offices: offices,\n        isAdmin: isAdmin,\n        onClose: () => setShowAdd(false),\n        onSubmit: async fd => {\n          const r = await fetch(`${API_BASE}/forms`, {\n            method: 'POST',\n            headers: {\n              Authorization: `Bearer ${token}`\n            },\n            body: fd\n          });\n          if (!r.ok) {\n            const e = await r.json().catch(() => ({}));\n            alert(e.error || 'Failed to create form');\n            return;\n          }\n          setShowAdd(false);\n          await loadForms();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: !!editItem,\n      onClose: () => setEditItem(null),\n      title: \"Edit Form\",\n      children: editItem && /*#__PURE__*/_jsxDEV(FormEditor, {\n        form: editItem,\n        offices: offices,\n        isAdmin: isAdmin,\n        onClose: () => setEditItem(null),\n        onSubmit: async fd => {\n          const r = await fetch(`${API_BASE}/forms/${editItem.id}`, {\n            method: 'PUT',\n            headers: {\n              Authorization: `Bearer ${token}`\n            },\n            body: fd\n          });\n          if (!r.ok) {\n            const e = await r.json().catch(() => ({}));\n            alert(e.error || 'Failed to update form');\n            return;\n          }\n          setEditItem(null);\n          await loadForms();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: !!deleteItem,\n      onClose: () => setDeleteItem(null),\n      title: \"Delete Form\",\n      children: deleteItem && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-700\",\n          children: [\"Delete \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium\",\n            children: deleteItem.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 59\n          }, this), \"?\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setDeleteItem(null),\n            className: \"px-4 py-2 rounded-md border\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: async () => {\n              const r = await fetch(`${API_BASE}/forms/${deleteItem.id}`, {\n                method: 'DELETE',\n                headers: {\n                  Authorization: `Bearer ${token}`\n                }\n              });\n              if (!r.ok) {\n                const e = await r.json().catch(() => ({}));\n                alert(e.error || 'Failed to delete');\n                return;\n              }\n              setDeleteItem(null);\n              await loadForms();\n            },\n            className: \"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700\",\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n}\n_s(Forms, \"qnzcH4UKI+Qk8ghXHvqsV0zZWVs=\", false, function () {\n  return [useAuth];\n});\n_c = Forms;\nfunction handleDownload(e, f) {\n  e.preventDefault();\n  const list = Array.isArray(f.files) ? f.files : [];\n  if (list.length > 1) {\n    for (const file of list) {\n      const a = document.createElement('a');\n      a.href = `${API_ORIGIN}${file.file_url}`;\n      if (file.original_name) a.download = file.original_name;\n      document.body.appendChild(a);\n      a.click();\n      a.remove();\n    }\n  } else if (f.file_url) {\n    const a = document.createElement('a');\n    a.href = `${API_ORIGIN}${f.file_url}`;\n    document.body.appendChild(a);\n    a.click();\n    a.remove();\n  }\n}\nfunction FormEditor({\n  form,\n  onClose,\n  onSubmit,\n  isAdmin,\n  offices\n}) {\n  _s2();\n  var _find;\n  const {\n    user\n  } = useAuth();\n  const myOfficeId = (user === null || user === void 0 ? void 0 : user.officeId) || (user === null || user === void 0 ? void 0 : user.office_id) || null;\n  const [title, setTitle] = useState((form === null || form === void 0 ? void 0 : form.title) || '');\n  const [description, setDescription] = useState((form === null || form === void 0 ? void 0 : form.description) || '');\n  const [officeId, setOfficeId] = useState(isAdmin ? (form === null || form === void 0 ? void 0 : form.office_id) || '' : myOfficeId || '');\n  const [newFiles, setNewFiles] = useState([]);\n  const existingFiles = React.useMemo(() => {\n    if (form !== null && form !== void 0 && form.files && form.files.length) return form.files.map(f => ({\n      ...f\n    }));\n    if (form !== null && form !== void 0 && form.file_url) return [{\n      id: null,\n      file_url: form.file_url,\n      original_name: null\n    }];\n    return [];\n  }, [form]);\n  const [removeIds, setRemoveIds] = useState(new Set());\n  async function handleSubmit(e) {\n    e.preventDefault();\n    const fd = new FormData();\n    if (!form || title !== (form.title || '')) fd.append('title', title.trim());\n    if (description !== ((form === null || form === void 0 ? void 0 : form.description) || '')) fd.append('description', description);\n    if (isAdmin) {\n      if (!form || officeId !== (form.office_id || '')) fd.append('officeId', String(officeId));\n    }\n    if (!form && (!newFiles || newFiles.length === 0)) {\n      alert('Please choose at least one file');\n      return;\n    }\n    // Prevent saving with zero files after removals\n    if (form) {\n      const childIds = (form.files || []).map(f => f.id).filter(id => Number.isFinite(id));\n      const willRemoveAll = childIds.length > 0 && childIds.every(id => removeIds.has(id));\n      if (willRemoveAll && (!newFiles || newFiles.length === 0)) {\n        alert('A form must have at least one file. Add new files or undo removals.');\n        return;\n      }\n    }\n    if (newFiles && newFiles.length) {\n      for (const f of newFiles) fd.append('files', f);\n    }\n    if (removeIds.size) {\n      fd.append('removeFileIds', JSON.stringify(Array.from(removeIds)));\n    }\n    await onSubmit(fd);\n  }\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"space-y-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block text-sm text-gray-700\",\n        children: \"Title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: title,\n        onChange: e => setTitle(e.target.value),\n        className: \"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block text-sm text-gray-700\",\n        children: \"Description\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: description,\n        onChange: e => setDescription(e.target.value),\n        className: \"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n        rows: 3\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this), isAdmin ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block text-sm text-gray-700\",\n        children: \"Office\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: officeId,\n        onChange: e => setOfficeId(e.target.value),\n        className: \"w-full border rounded-md px-3 py-2 text-sm\",\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"\\u2014 Select office \\u2014\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 13\n        }, this), (offices || []).map(o => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: o.id,\n          children: o.name\n        }, o.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-sm text-gray-600\",\n      children: [\"Office: \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"font-medium\",\n        children: (form === null || form === void 0 ? void 0 : form.office_name) || ((_find = (offices || []).find(x => String(x.id) === String(officeId))) === null || _find === void 0 ? void 0 : _find.name) || 'My Office'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 56\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 9\n    }, this), existingFiles.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"block text-sm text-gray-700 mb-1\",\n        children: \"Existing files\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"space-y-1 text-sm\",\n        children: existingFiles.map(f => {\n          const marked = removeIds.has(f.id);\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"a\", {\n              href: `${API_ORIGIN}${f.file_url}`,\n              target: \"_blank\",\n              rel: \"noreferrer\",\n              className: `text-blue-700 hover:underline truncate ${marked ? 'line-through opacity-60' : ''}`,\n              children: f.original_name || f.file_url\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 19\n            }, this), Number.isFinite(f.id) && /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => {\n                setRemoveIds(prev => {\n                  const n = new Set(Array.from(prev));\n                  if (n.has(f.id)) n.delete(f.id);else n.add(f.id);\n                  return n;\n                });\n              },\n              className: `ml-2 text-xs px-2 py-1 rounded ${marked ? 'bg-gray-200 text-gray-700' : 'bg-red-600 text-white hover:bg-red-700'}`,\n              children: marked ? 'Undo' : 'Remove'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 21\n            }, this)]\n          }, f.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block text-sm text-gray-700\",\n        children: form ? 'Add more files' : 'Files'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        multiple: true,\n        accept: \".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.csv,image/png,image/jpeg,image/webp\",\n        onChange: e => setNewFiles(Array.from(e.target.files || []))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-end gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: onClose,\n        className: \"px-4 py-2 rounded-md border\",\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700\",\n        children: form ? 'Save' : 'Create'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 239,\n    columnNumber: 5\n  }, this);\n}\n_s2(FormEditor, \"7+Ndg97DLqPotmbOxdx6byJIHkA=\", false, function () {\n  return [useAuth];\n});\n_c2 = FormEditor;\nvar _c, _c2;\n$RefreshReg$(_c, \"Forms\");\n$RefreshReg$(_c2, \"FormEditor\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useAuth","API_BASE","API_ORIGIN","Modal","jsxDEV","_jsxDEV","Forms","_s","user","token","isAdmin","role","myOfficeId","officeId","office_id","items","setItems","loading","setLoading","error","setError","showAdd","setShowAdd","editItem","setEditItem","deleteItem","setDeleteItem","offices","setOffices","canManage","f","Number","loadForms","r","fetch","ok","Error","list","json","Array","isArray","e","message","loadOffices","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","title","xmlns","viewBox","fill","d","fillRule","clipRule","description","office_name","files","length","handleDownload","id","open","onClose","FormEditor","onSubmit","fd","method","headers","Authorization","body","catch","alert","form","_c","preventDefault","file","a","document","createElement","href","file_url","original_name","download","appendChild","click","remove","_s2","_find","setTitle","setDescription","setOfficeId","newFiles","setNewFiles","existingFiles","removeIds","setRemoveIds","Set","handleSubmit","FormData","append","trim","String","childIds","filter","isFinite","willRemoveAll","every","has","size","JSON","stringify","from","value","onChange","target","required","rows","o","name","find","x","marked","rel","type","prev","n","delete","add","multiple","accept","_c2","$RefreshReg$"],"sources":["C:/Web Systems/GovConnect/frontend/src/pages/Forms.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { API_BASE, API_ORIGIN } from '../config';\nimport Modal from '../components/Modal';\n\nexport default function Forms() {\n  const { user, token } = useAuth();\n  const isAdmin = !!user && (user.role === 'admin' || user.role === 'superadmin');\n  const myOfficeId = user?.officeId || user?.office_id || null;\n\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [showAdd, setShowAdd] = useState(false);\n  const [editItem, setEditItem] = useState(null);\n  const [deleteItem, setDeleteItem] = useState(null);\n  const [offices, setOffices] = useState([]);\n\n  const canManage = useMemo(() => (f) => {\n    if (isAdmin) return true;\n    if (!!user && user.role === 'officer' && myOfficeId && Number(f.office_id) === Number(myOfficeId)) return true;\n    return false;\n  }, [isAdmin, user, myOfficeId]);\n\n  async function loadForms() {\n    setLoading(true); setError('');\n    try {\n      const r = await fetch(`${API_BASE}/forms`);\n      if (!r.ok) throw new Error('Failed loading forms');\n      const list = await r.json();\n      setItems(Array.isArray(list) ? list : []);\n    } catch (e) { setError(e.message || 'Error'); }\n    finally { setLoading(false); }\n  }\n\n  async function loadOffices() {\n    if (!isAdmin) return; // only admins need office list\n    try {\n      const r = await fetch(`${API_BASE}/offices`);\n      if (!r.ok) return;\n      const list = await r.json();\n      setOffices(Array.isArray(list) ? list : []);\n    } catch {}\n  }\n\n  useEffect(() => { loadForms(); }, []);\n  useEffect(() => { loadOffices(); }, [isAdmin]);\n\n  return (\n    <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-2xl font-semibold mb-4\">Downloadable Forms</h1>\n        {(isAdmin || (!!user && user.role === 'officer' && myOfficeId)) && (\n          <button onClick={()=>setShowAdd(true)} className=\"text-sm px-3 py-2 rounded-md border bg-white\">Add Form</button>\n        )}\n      </div>\n      {loading && <div className=\"text-sm text-gray-600\">Loading forms...</div>}\n      {error && <div className=\"text-sm text-red-600\">{error}</div>}\n      <div className=\"border rounded-md divide-y\">\n        {(items || []).map((f) => (\n          <div key={f.id} className=\"relative p-4\">\n            {canManage(f) && (\n              <div className=\"absolute top-2 right-2 flex items-center gap-1\">\n                <button\n                  onClick={()=>setEditItem(f)}\n                  title=\"Edit\"\n                  className=\"inline-flex items-center justify-center w-8 h-8 rounded-md text-gray-600 hover:text-gray-800 hover:bg-gray-100\"\n                >\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" className=\"w-4 h-4\"><path d=\"M15.728 1.794a2.5 2.5 0 0 1 3.536 3.536l-10 10A2.5 2.5 0 0 1 7.5 16H5a1 1 0 0 1-1-1v-2.5a2.5 2.5 0 0 1 .732-1.768l10-10ZM5 18a1 1 0 1 0 0-2h2.5a4.5 4.5 0 0 0 3.182-1.318l10-10a4.5 4.5 0 1 0-6.364-6.364l-10 10A4.5 4.5 0 0 0 3 12.5V15a3 3 0 0 0 3 3H5Z\"/></svg>\n                </button>\n                <button\n                  onClick={()=>setDeleteItem(f)}\n                  title=\"Delete\"\n                  className=\"inline-flex items-center justify-center w-8 h-8 rounded-md text-red-600 hover:text-red-700 hover:bg-red-50\"\n                >\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" className=\"w-4 h-4\"><path fillRule=\"evenodd\" d=\"M9 2a1 1 0 0 0-.894.553L7.382 4H4a1 1 0 1 0 0 2h.293l.853 10.235A2 2 0 0 0 7.14 18h5.72a2 2 0 0 0 1.994-1.765L15.707 6H16a1 1 0 1 0 0-2h-3.382l-.724-1.447A1 1 0 0 0 10 2H9Zm1 5a1 1 0 0 1 1 1v7a1 1 0 1 1-2 0V8a1 1 0 0 1 1-1Zm-3 1a1 1 0 0 1 2 0v7a1 1 0 1 1-2 0V8Zm7 0a1 1 0 0 1 2 0v7a1 1 0 1 1-2 0V8Z\" clipRule=\"evenodd\"/></svg>\n                </button>\n              </div>\n            )}\n            <div className=\"flex items-center justify-between gap-4\">\n              <div className=\"min-w-0\">\n                <div className=\"font-medium truncate\">{f.title}</div>\n                <div className=\"text-xs text-gray-600 truncate\">{f.description || '—'}</div>\n                <div className=\"text-xs text-gray-500\">Office: {f.office_name}</div>\n                {!!(f.files && f.files.length > 1) && (\n                  <div className=\"text-xs text-gray-500 mt-1\">Files: {f.files.length}</div>\n                )}\n              </div>\n              <div className=\"shrink-0 flex items-center gap-2\">\n                <button\n                  onClick={(e)=>handleDownload(e, f)}\n                  className=\"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\n                >\n                  Download\n                </button>\n              </div>\n            </div>\n          </div>\n        ))}\n        {!loading && (!items || items.length === 0) && (\n          <div className=\"p-4 text-sm text-gray-600\">No forms yet.</div>\n        )}\n      </div>\n\n      {/* Add */}\n      <Modal open={!!showAdd} onClose={()=>setShowAdd(false)} title=\"Add Form\">\n        {showAdd && (\n          <FormEditor\n            offices={offices}\n            isAdmin={isAdmin}\n            onClose={()=>setShowAdd(false)}\n            onSubmit={async (fd)=>{\n              const r = await fetch(`${API_BASE}/forms`, { method: 'POST', headers: { Authorization: `Bearer ${token}` }, body: fd });\n              if (!r.ok) {\n                const e = await r.json().catch(()=>({}));\n                alert(e.error || 'Failed to create form');\n                return;\n              }\n              setShowAdd(false);\n              await loadForms();\n            }}\n          />\n        )}\n      </Modal>\n\n      {/* Edit */}\n      <Modal open={!!editItem} onClose={()=>setEditItem(null)} title=\"Edit Form\">\n        {editItem && (\n          <FormEditor\n            form={editItem}\n            offices={offices}\n            isAdmin={isAdmin}\n            onClose={()=>setEditItem(null)}\n            onSubmit={async (fd)=>{\n              const r = await fetch(`${API_BASE}/forms/${editItem.id}`, { method: 'PUT', headers: { Authorization: `Bearer ${token}` }, body: fd });\n              if (!r.ok) {\n                const e = await r.json().catch(()=>({}));\n                alert(e.error || 'Failed to update form');\n                return;\n              }\n              setEditItem(null);\n              await loadForms();\n            }}\n          />\n        )}\n      </Modal>\n\n      {/* Delete */}\n      <Modal open={!!deleteItem} onClose={()=>setDeleteItem(null)} title=\"Delete Form\">\n        {deleteItem && (\n          <div className=\"space-y-4\">\n            <div className=\"text-sm text-gray-700\">Delete <span className=\"font-medium\">{deleteItem.title}</span>?</div>\n            <div className=\"flex justify-end gap-2\">\n              <button onClick={()=>setDeleteItem(null)} className=\"px-4 py-2 rounded-md border\">Cancel</button>\n              <button onClick={async()=>{\n                const r = await fetch(`${API_BASE}/forms/${deleteItem.id}`, { method: 'DELETE', headers: { Authorization: `Bearer ${token}` } });\n                if (!r.ok) {\n                  const e = await r.json().catch(()=>({}));\n                  alert(e.error || 'Failed to delete');\n                  return;\n                }\n                setDeleteItem(null);\n                await loadForms();\n              }} className=\"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700\">Delete</button>\n            </div>\n          </div>\n        )}\n      </Modal>\n    </div>\n  );\n}\n\nfunction handleDownload(e, f) {\n  e.preventDefault();\n  const list = Array.isArray(f.files) ? f.files : [];\n  if (list.length > 1) {\n    for (const file of list) {\n      const a = document.createElement('a');\n      a.href = `${API_ORIGIN}${file.file_url}`;\n      if (file.original_name) a.download = file.original_name;\n      document.body.appendChild(a);\n      a.click();\n      a.remove();\n    }\n  } else if (f.file_url) {\n    const a = document.createElement('a');\n    a.href = `${API_ORIGIN}${f.file_url}`;\n    document.body.appendChild(a);\n    a.click();\n    a.remove();\n  }\n}\n\nfunction FormEditor({ form, onClose, onSubmit, isAdmin, offices }) {\n  const { user } = useAuth();\n  const myOfficeId = user?.officeId || user?.office_id || null;\n  const [title, setTitle] = useState(form?.title || '');\n  const [description, setDescription] = useState(form?.description || '');\n  const [officeId, setOfficeId] = useState(isAdmin ? (form?.office_id || '') : (myOfficeId || ''));\n  const [newFiles, setNewFiles] = useState([]);\n  const existingFiles = React.useMemo(() => {\n    if (form?.files && form.files.length) return form.files.map((f)=>({ ...f }));\n    if (form?.file_url) return [{ id: null, file_url: form.file_url, original_name: null }];\n    return [];\n  }, [form]);\n  const [removeIds, setRemoveIds] = useState(new Set());\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    const fd = new FormData();\n    if (!form || title !== (form.title || '')) fd.append('title', title.trim());\n    if (description !== (form?.description || '')) fd.append('description', description);\n    if (isAdmin) {\n      if (!form || officeId !== (form.office_id || '')) fd.append('officeId', String(officeId));\n    }\n    if (!form && (!newFiles || newFiles.length === 0)) {\n      alert('Please choose at least one file');\n      return;\n    }\n    // Prevent saving with zero files after removals\n    if (form) {\n      const childIds = (form.files || []).map((f)=>f.id).filter((id)=>Number.isFinite(id));\n      const willRemoveAll = childIds.length > 0 && childIds.every((id)=>removeIds.has(id));\n      if (willRemoveAll && (!newFiles || newFiles.length === 0)) {\n        alert('A form must have at least one file. Add new files or undo removals.');\n        return;\n      }\n    }\n    if (newFiles && newFiles.length) {\n      for (const f of newFiles) fd.append('files', f);\n    }\n    if (removeIds.size) {\n      fd.append('removeFileIds', JSON.stringify(Array.from(removeIds)));\n    }\n    await onSubmit(fd);\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <div>\n        <label className=\"block text-sm text-gray-700\">Title</label>\n        <input value={title} onChange={(e)=>setTitle(e.target.value)} className=\"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\" required />\n      </div>\n      <div>\n        <label className=\"block text-sm text-gray-700\">Description</label>\n        <textarea value={description} onChange={(e)=>setDescription(e.target.value)} className=\"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\" rows={3} />\n      </div>\n      {isAdmin ? (\n        <div>\n          <label className=\"block text-sm text-gray-700\">Office</label>\n          <select value={officeId} onChange={(e)=>setOfficeId(e.target.value)} className=\"w-full border rounded-md px-3 py-2 text-sm\" required>\n            <option value=\"\">— Select office —</option>\n            {(offices || []).map(o => (\n              <option key={o.id} value={o.id}>{o.name}</option>\n            ))}\n          </select>\n        </div>\n      ) : (\n        <div className=\"text-sm text-gray-600\">Office: <span className=\"font-medium\">{form?.office_name || (offices || []).find(x=>String(x.id)===String(officeId))?.name || 'My Office'}</span></div>\n      )}\n      {existingFiles.length > 0 && (\n        <div>\n          <div className=\"block text-sm text-gray-700 mb-1\">Existing files</div>\n          <ul className=\"space-y-1 text-sm\">\n            {existingFiles.map((f) => {\n              const marked = removeIds.has(f.id);\n              return (\n                <li key={f.id} className=\"flex items-center justify-between\">\n                  <a href={`${API_ORIGIN}${f.file_url}`} target=\"_blank\" rel=\"noreferrer\" className={`text-blue-700 hover:underline truncate ${marked ? 'line-through opacity-60' : ''}`}>\n                    {f.original_name || f.file_url}\n                  </a>\n                  {Number.isFinite(f.id) && (\n                    <button\n                      type=\"button\"\n                      onClick={()=>{\n                        setRemoveIds(prev=>{\n                          const n = new Set(Array.from(prev));\n                          if (n.has(f.id)) n.delete(f.id); else n.add(f.id);\n                          return n;\n                        });\n                      }}\n                      className={`ml-2 text-xs px-2 py-1 rounded ${marked ? 'bg-gray-200 text-gray-700' : 'bg-red-600 text-white hover:bg-red-700'}`}\n                    >\n                      {marked ? 'Undo' : 'Remove'}\n                    </button>\n                  )}\n                </li>\n              );\n            })}\n          </ul>\n        </div>\n      )}\n      <div>\n        <label className=\"block text-sm text-gray-700\">{form ? 'Add more files' : 'Files'}</label>\n        <input\n          type=\"file\"\n          multiple\n          accept=\".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.csv,image/png,image/jpeg,image/webp\"\n          onChange={(e)=>setNewFiles(Array.from(e.target.files || []))}\n        />\n      </div>\n      <div className=\"flex justify-end gap-2\">\n        <button type=\"button\" onClick={onClose} className=\"px-4 py-2 rounded-md border\">Cancel</button>\n        <button className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700\">{form ? 'Save' : 'Create'}</button>\n      </div>\n    </form>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}